# To-Do List REST API (Spring Boot)

Этот проект представляет собой REST API для управления списком задач. В приложении реализованы CRUD-операции, работа с базой данных, кэширование и асинхронная обработка событий.

## Технологический стек

* **Java 17** & **Spring Boot 3.4.1**
* **Spring Data JPA** (для работы с БД)
* **H2 Database** 
* **Spring Security**
* **Spring Cache** (кэширование данных)
* **Spring Events** (асинхронная обработка создания задач)
* **Actuator & Prometheus** (метрики)

---

## Реализованный функционал

1. **Полный CRUD API**: Создание, чтение, обновление и удаление задач.
2. **Валидация данных**: Название задачи не может быть пустым (аннотации `@Valid`, `@NotBlank`).
3. **База данных**: Интеграция с H2, данные сохраняются в файл `./data/mydb`.
4. **Кэширование**: Повторные GET-запросы не нагружают БД (аннотации `@Cacheable`, `@CacheEvict`).
5. **Очередь событий**: При создании задачи срабатывает асинхронный слушатель (имитация очереди сообщений).
6. **Метрики**: Доступны эндпоинты для мониторинга состояния приложения.

---

## Как проверить работу

### 1. Доступ к H2 Console (База данных)

Вы можете просмотреть таблицы в браузере:

* **URL**: `http://localhost:8080/h2-console`
* **JDBC URL**: `jdbc:h2:file:./data/mydb`
* **User**: `SA`
* **Password**: (оставьте пустым)

### 2. Тестирование в Postman

#### **A. Получить все задачи**

* **Метод**: `GET`
* **URL**: `http://localhost:8080/tasks`

#### **B. Создать новую задачу**

* **Метод**: `POST`
* **URL**: `http://localhost:8080/tasks`
* **Body (JSON)**:

```json
{
    "title": "Купить молоко",
    "description": "Обязательно 3.2% жирности",
    "status": "todo"
}

```

#### **C. Обновить статус или заголовок (Частичное обновление)**

* **Метод**: `PATCH`
* **URL**: `http://localhost:8080/tasks/1`
* **Body (JSON)**:

```json
{
    "status": "done"
}

```

#### **D. Удалить задачу**

* **Метод**: `DELETE`
* **URL**: `http://localhost:8080/tasks/1`

---

## Мониторинг и метрики

Приложение экспортирует метрики для Prometheus:

* `http://localhost:8080/actuator/prometheus`
* `http://localhost:8080/actuator/health` (статус приложения)

---

## Коды состояния (HTTP Status Codes)

* `200 OK` — Успешное получение или обновление.
* `201 Created` — Задача успешно создана.
* `204 No Content` — Задача успешно удалена.
* `400 Bad Request` — Ошибка валидации (например, пустой title).
* `404 Not Found` — Задача с указанным ID не найдена.

---
